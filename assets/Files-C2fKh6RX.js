import{i as g,j as e,y as G,z as A,r as f,C as q,B as c,T as l,A as B,G as L,R as K,w as j,E as W,I as M,L as U,t as Y,v as Q,F as X,H as J}from"./index-RJbagf5J.js";import{A as Z}from"./Alert-CpOF-XOJ.js";import{C as S}from"./Card-DXb3d0X1.js";import{C as ee}from"./CardContent-BZmH5xwH.js";import{A as R}from"./Avatar-C56mUnM6.js";import{C as D}from"./Chip-Br4gz0C7.js";import{T as oe,a as re}from"./Tabs-bztXaNgO.js";import{T as te}from"./TextField-dlsORlfD.js";import{I as ne}from"./InputAdornment-BF-Lupev.js";import{S as se}from"./Search-BY5C-jJo.js";import{L as ie}from"./ListItemIcon-zwtsTfEP.js";import{C as ae}from"./People-C5hLrPtU.js";import"./useSlot-CpVf3ZgY.js";import"./useControlled-Cic5xKi0.js";const le=g(e.jsx("path",{d:"M20 7h-5V4c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2M9 12c.83 0 1.5.67 1.5 1.5S9.83 15 9 15s-1.5-.67-1.5-1.5S8.17 12 9 12m3 6H6v-.75c0-1 2-1.5 3-1.5s3 .5 3 1.5zm1-9h-2V4h2zm5 7.5h-4V15h4zm0-3h-4V12h4z"}),"Badge"),de=g(e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description"),ce=g(e.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),E=g(e.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}),"Folder"),xe=g(e.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz"),pe=g(e.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),H={onboarding:["Test-3.pdf","Test-6.pdf"],client:["Test-1.pdf","Test-6.pdf"],training:["Test-4.pdf","Test-5.pdf"],forms:["Test-2.pdf","Test-6.pdf"]},P={onboarding:new Set,client:new Set,training:new Set,forms:new Set};async function he(t,r){try{const a=await fetch(`/files/${t}/${r}`,{method:"HEAD",cache:"no-cache"});if(!a.ok)return null;const n=a.headers.get("content-length"),x=a.headers.get("last-modified"),s=b=>{if(!b)return"未知大小";const h=parseInt(b);return h<1024?`${h} B`:h<1024*1024?`${Math.round(h/1024)} KB`:`${(h/(1024*1024)).toFixed(1)} MB`},p=b=>b?new Date(b).toISOString().split("T")[0]:new Date().toISOString().split("T")[0];return{name:r,displayName:r.replace(".pdf",""),size:s(n),date:p(x),category:t,exists:!0,lastModified:x?new Date(x):new Date}}catch(a){return console.error(`获取文件详情失败: ${r}`,a),null}}function be(t){const r=H[t]||[],a=Array.from(P[t]||[]);return[...r,...a]}async function V(t){console.log(`🔍 正在扫描 ${t} 目录...`);const r=[],a=be(t);console.log(`📋 检测 ${a.length} 个可能的文件名: ${a.join(", ")}`);const n=a.map(async s=>await he(t,s));return(await Promise.all(n)).forEach(s=>{var p;s&&(r.push(s),console.log(`✅ 发现文件: ${s.displayName} (${s.size})`),(p=H[t])!=null&&p.includes(s.name)||P[t].add(s.name))}),r.sort((s,p)=>s.name.localeCompare(p.name)),console.log(`📊 ${t} 目录扫描完成，找到 ${r.length} 个文件`),r}async function fe(){const t=["onboarding","client","training","forms"],r={};console.log("🚀 开始扫描所有文件目录...");for(const n of t)r[n]=await V(n);const a=Object.values(r).reduce((n,x)=>n+x.length,0);return console.log(`🎉 扫描完成！总共找到 ${a} 个文件`),r}async function me(t){return console.log(`🔄 刷新 ${t} 分类...`),await V(t)}const ge=e.jsx(J,{styles:{body:{overflowX:"hidden"},".MuiCard-root:hover, .MuiListItem-root:hover":{willChange:"transform"}}}),m=[{id:"onboarding",title:"Employment Forms",description:"Employee onboarding files and required forms",icon:e.jsx(pe,{sx:{fontSize:48}}),color:"#5B9BD5",count:2},{id:"client",title:"Client Documents",description:"Service-related agreements, consents, and policy documents",icon:e.jsx(ae,{sx:{fontSize:48}}),color:"#5B9BD5",count:1},{id:"training",title:"Training Documents",description:"Staff training guides, manuals, and instructional materials",icon:e.jsx(le,{sx:{fontSize:48}}),color:"#5B9BD5",count:2},{id:"forms",title:"Forms",description:"Daily use forms and record-keeping templates",icon:e.jsx(xe,{sx:{fontSize:48}}),color:"#5B9BD5",count:1}];function Te(){var I,T;const t=G(),r=A(t.breakpoints.down("md")),a=A(t.breakpoints.down("sm")),[n,x]=f.useState(""),[s,p]=f.useState(""),[b,h]=f.useState({}),[w,k]=f.useState(!0),[u,z]=f.useState(!1),[F,v]=f.useState(null),$=async()=>{try{k(!0),v(null),console.log("🔄 Starting to load files....");const o=await fe();h(o),m.forEach(i=>{var d;i.count=((d=o[i.id])==null?void 0:d.length)||0}),console.log("✅ Files loaded successfully:",o)}catch(o){console.error("❌ Failed to load files:",o),v("Failed to load files. Please try again.")}finally{k(!1)}},N=async o=>{try{z(!0),console.log(`🔄 Refreshing ${o} category...`);const i=await me(o);h(y=>({...y,[o]:i}));const d=m.find(y=>y.id===o);d&&(d.count=i.length),console.log(`✅ ${o} refreshed successfully`)}catch(i){console.error(`❌ ${o} Failed to refresh category:`,i),v(`${o} Failed to refresh category`)}finally{z(!1)}};f.useEffect(()=>{$()},[]);const O=(o,i)=>{x(i)},C=((I=b[n])==null?void 0:I.filter(o=>o.name.toLowerCase().includes(s.toLowerCase())||o.displayName&&o.displayName.toLowerCase().includes(s.toLowerCase())))||[],_=o=>{try{const i=`/files/${o.category}/${o.name}`,d=document.createElement("a");d.href=i,d.download=o.name,d.target="_blank",document.body.appendChild(d),d.click(),document.body.removeChild(d),console.log("Starting file download:",o.displayName||o.name,"Path:",i)}catch(i){console.error("Download failed:",i),alert("Download failed. Please try again later.")}};return e.jsxs(e.Fragment,{children:[ge,e.jsxs(q,{maxWidth:!1,sx:{maxWidth:"1400px",mx:"auto",px:r?2:3,py:r?2:4},children:[e.jsxs(c,{textAlign:"center",sx:{mb:6},children:[e.jsx(l,{variant:r?"h3":"h2",component:"h1",gutterBottom:!0,sx:{fontSize:a?"1.75rem":"inherit"},children:"Allcare Document Center"}),e.jsxs(l,{variant:r?"body1":"h6",color:"text.secondary",sx:{maxWidth:600,mx:"auto",mb:3,fontStyle:"italic",px:r?2:0},children:["Access key care documents, including agreements, ",r?"":e.jsx("br",{}),"policies, and training materials."]}),w&&e.jsxs(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(B,{size:20,sx:{color:"#5B9BD5"}}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Loading..."})]}),F&&e.jsx(Z,{severity:"error",sx:{mt:2,maxWidth:600,mx:"auto"},children:F})]}),e.jsx(L,{container:!0,spacing:r?2:4,sx:{mb:6},children:m.map(o=>e.jsx(L,{item:!0,xs:12,sm:6,md:3,children:e.jsx(S,{sx:{height:"100%",cursor:"pointer",transition:"transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1), box-shadow 0.8s cubic-bezier(0.165, 0.84, 0.44, 1)",willChange:"transform, box-shadow",border:n===o.id?2:0,borderColor:n===o.id?o.color:"transparent",borderRadius:4,background:n===o.id?`linear-gradient(145deg, ${o.color}08, ${o.color}15)`:"linear-gradient(145deg, #ffffff, #f8f9fa)",boxShadow:n===o.id?"0 8px 32px rgba(91, 155, 213, 0.3), 0 4px 16px rgba(91, 155, 213, 0.2)":"0 4px 20px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04)",position:"relative",overflow:"hidden",transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden",perspective:1e3,"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, ${o.color}, ${o.color}80)`,opacity:n===o.id?1:0,transition:"opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1)",willChange:"opacity"},"&:hover":r?{transform:"none",boxShadow:"inherit"}:{transform:"translate3d(0, -6px, 0) scale(1.01)",boxShadow:"0 12px 40px rgba(91, 155, 213, 0.2), 0 6px 20px rgba(91, 155, 213, 0.1)","&::before":{opacity:1}}},onClick:()=>x(o.id),children:e.jsxs(ee,{sx:{textAlign:"center",p:3},children:[e.jsx(R,{sx:{width:80,height:80,mx:"auto",mb:2,background:`linear-gradient(145deg, ${o.color}25, ${o.color}15)`,color:o.color,boxShadow:`
                      inset 0 2px 4px rgba(255, 255, 255, 0.8),
                      inset 0 -2px 4px rgba(0, 0, 0, 0.1),
                      0 4px 12px rgba(91, 155, 213, 0.2)
                    `,border:`2px solid ${o.color}30`,transition:"none",position:"relative","&::before":{content:'""',position:"absolute",top:"10%",left:"10%",width:"30%",height:"30%",background:"rgba(255, 255, 255, 0.3)",borderRadius:"50%",filter:"blur(8px)"}},children:o.icon}),e.jsx(l,{variant:"h5",gutterBottom:!0,children:o.title}),e.jsx(l,{variant:"body2",color:"text.secondary",paragraph:!0,children:o.description}),e.jsx(D,{label:`${o.count} Files`,sx:{background:`linear-gradient(145deg, ${o.color}, ${o.color}cc)`,color:"white",fontWeight:600,boxShadow:`
                      0 2px 8px rgba(91, 155, 213, 0.3),
                      inset 0 1px 2px rgba(255, 255, 255, 0.2),
                      inset 0 -1px 2px rgba(0, 0, 0, 0.1)
                    `,border:`1px solid ${o.color}80`,transition:"none"}})]})})},o.id))}),e.jsxs(S,{sx:{p:4,borderRadius:4,background:"linear-gradient(145deg, #ffffff, #f8f9fa)",boxShadow:`
          0 8px 32px rgba(0, 0, 0, 0.08),
          0 4px 16px rgba(0, 0, 0, 0.04),
          inset 0 1px 2px rgba(255, 255, 255, 0.8)
        `,border:"1px solid rgba(91, 155, 213, 0.1)",transition:"none","&:hover":{transform:"none",boxShadow:`
            0 8px 32px rgba(0, 0, 0, 0.08),
            0 4px 16px rgba(0, 0, 0, 0.04),
            inset 0 1px 2px rgba(255, 255, 255, 0.8)
          `}},children:[e.jsxs(c,{sx:{mb:3},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsx(oe,{value:n||!1,onChange:O,variant:"scrollable",scrollButtons:"auto",sx:{flex:1},children:m.map(o=>e.jsx(re,{label:o.title,value:o.id,icon:K.cloneElement(o.icon,{sx:{fontSize:24}}),iconPosition:"start"},o.id))}),!w&&e.jsx(j,{variant:"outlined",size:"small",startIcon:u?e.jsx(B,{size:16}):e.jsx(W,{}),onClick:$,disabled:u,sx:{borderColor:"#5B9BD5",color:"#5B9BD5",ml:2,minWidth:"auto","&:hover":{borderColor:"#5B9BD5",backgroundColor:"rgba(91, 155, 213, 0.1)"}},children:u?"Refreshing...":"Refresh List"})]}),e.jsx(te,{fullWidth:!0,placeholder:"Searching...",value:s,onChange:o=>p(o.target.value),InputProps:{startAdornment:e.jsx(ne,{position:"start",children:e.jsx(se,{})})},sx:{mb:3}})]}),n?e.jsxs(e.Fragment,{children:[e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(l,{variant:"h5",children:(T=m.find(o=>o.id===n))==null?void 0:T.title}),e.jsx(M,{onClick:()=>N(n),disabled:u,sx:{color:"#5B9BD5",border:"1px solid #5B9BD5",borderRadius:2,padding:1,"&:hover":{backgroundColor:"rgba(91, 155, 213, 0.1)",borderColor:"#5B9BD5"},"&:disabled":{color:"rgba(91, 155, 213, 0.5)",borderColor:"rgba(91, 155, 213, 0.3)"}},children:u?e.jsx(B,{size:20,sx:{color:"#5B9BD5"}}):e.jsx(W,{})})]}),e.jsxs(l,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Found ",C.length," files ",w&&"(Scanning...)"]}),e.jsx(U,{children:C.map((o,i)=>e.jsxs(Y,{sx:{border:"1px solid rgba(91, 155, 213, 0.15)",borderRadius:3,mb:2,background:"linear-gradient(145deg, #ffffff, #f8f9fa)",boxShadow:`
                      0 2px 8px rgba(0, 0, 0, 0.06),
                      0 1px 4px rgba(0, 0, 0, 0.04),
                      inset 0 1px 1px rgba(255, 255, 255, 0.8)
                    `,transition:"transform 0.6s cubic-bezier(0.165, 0.84, 0.44, 1), background-color 0.4s ease",willChange:"transform",transform:"translate3d(0, 0, 0)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:"4px",background:"linear-gradient(180deg, #5B9BD5, #5B9BD580)",opacity:0,transition:"opacity 0.4s cubic-bezier(0.23, 1, 0.32, 1)"},"&:hover":{backgroundColor:"rgba(91, 155, 213, 0.05)",transform:"translate3d(2px, 0, 0)","&::before":{opacity:1}}},children:[e.jsx(ie,{children:e.jsx(R,{sx:{background:"linear-gradient(145deg, #5B9BD525, #5B9BD515)",color:"#5B9BD5",boxShadow:`
                        inset 0 1px 2px rgba(255, 255, 255, 0.8),
                        inset 0 -1px 2px rgba(0, 0, 0, 0.1),
                        0 2px 6px rgba(91, 155, 213, 0.2)
                      `,border:"1px solid rgba(91, 155, 213, 0.3)",transition:"none"},children:e.jsx(de,{})})}),e.jsx(Q,{primary:o.displayName||o.name,secondary:`Name: ${o.name} | Size: ${o.size} | Updated: ${o.date}`,primaryTypographyProps:{fontWeight:500}}),e.jsx(X,{children:e.jsx(M,{edge:"end",onClick:()=>_(o),sx:{background:"linear-gradient(145deg, #5B9BD5, #5B9BD5cc)",color:"white",boxShadow:`
                          0 3px 12px rgba(91, 155, 213, 0.4),
                          inset 0 1px 2px rgba(255, 255, 255, 0.3),
                          inset 0 -1px 2px rgba(0, 0, 0, 0.1)
                        `,border:"1px solid rgba(91, 155, 213, 0.8)",transition:"transform 0.2s ease, background 0.2s ease","&:hover":{background:"linear-gradient(145deg, #5B9BD5dd, #5B9BD5aa)",transform:"scale(1.05)"},"&:active":{transform:"scale(0.95)"}},children:e.jsx(ce,{})})})]},i))}),C.length===0&&e.jsxs(c,{textAlign:"center",sx:{py:4},children:[e.jsx(E,{sx:{fontSize:64,color:"grey.400",mb:2}}),e.jsx(l,{variant:"h6",color:"text.secondary",children:"No matching documents found"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Please try a different keyword or select another document category."})]})]}):e.jsxs(c,{textAlign:"center",sx:{py:8,"& *":{transition:"none !important","&:hover":{transform:"none !important"}}},children:[e.jsx(E,{sx:{fontSize:80,color:"#5B9BD5",mb:3,transition:"none","&:hover":{transform:"none"}}}),e.jsx(l,{variant:"h5",gutterBottom:!0,sx:{color:"#2c3e50",fontWeight:600},children:"Please Select a Document Category"}),e.jsx(l,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Click on a category card or tab above to browse the corresponding documents."}),e.jsx(c,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:m.map(o=>e.jsx(j,{variant:"outlined",onClick:()=>x(o.id),sx:{borderColor:o.color,color:o.color,transition:"none","&:hover":{borderColor:o.color,color:o.color,backgroundColor:"transparent",transform:"none"}},children:o.title},o.id))})]})]}),e.jsx(S,{sx:{mt:6,p:4,textAlign:"center",background:"linear-gradient(135deg, #5B9BD5 0%, #5B9BD5 100%)",color:"white",borderRadius:4,position:"relative",overflow:"hidden",boxShadow:"0 8px 32px rgba(91, 155, 213, 0.3)","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",pointerEvents:"none"}},children:e.jsxs(c,{sx:{position:"relative",zIndex:1},children:[e.jsx(l,{variant:"h4",gutterBottom:!0,sx:{fontWeight:700},children:"Need Help Finding a Document?"}),e.jsxs(l,{variant:"body1",sx:{mb:4,color:"rgba(255, 255, 255, 1) !important",fontWeight:400,fontStyle:"italic","& *":{color:"rgba(255, 255, 255, 1) !important"}},children:["If you’re unable to find the document you need or require assistance ",e.jsx("br",{}),"with other files, lease contact Allcare Health Care."]}),e.jsxs(c,{sx:{display:"flex",gap:3,justifyContent:"center",flexWrap:"wrap",mb:4},children:[e.jsx(j,{variant:"contained",size:"large",sx:{backgroundColor:"white",color:"#5B9BD5",px:4,py:1.5,borderRadius:3,fontWeight:600,textTransform:"none",boxShadow:"0 4px 20px rgba(255, 255, 255, 0.3)","&:hover":{}},children:"Contact Us"}),e.jsx(j,{variant:"outlined",size:"large",sx:{borderColor:"rgba(255, 255, 255, 0.8)",color:"white",px:4,py:1.5,borderRadius:3,fontWeight:600,textTransform:"none",borderWidth:2,"&:hover":{}},children:"View Customer Manual"})]}),e.jsxs(c,{sx:{display:"flex",gap:3,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(D,{label:"Phone: (240) 668-4666",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontSize:"0.9rem",fontWeight:500,px:2,py:1,borderRadius:3,border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)"}}),e.jsx(D,{label:"Email: allcaremd@outlook.com",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontSize:"0.9rem",fontWeight:500,px:2,py:1,borderRadius:3,border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)"}})]})]})})]})]})}export{Te as default};
