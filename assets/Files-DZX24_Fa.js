import{i as m,j as e,r as g,C as N,B as x,T as i,y as B,G as F,R as V,w as u,z as I,I as T,L as O,t as _,v as Y,A as G}from"./index-DvWieb68.js";import{A as q}from"./Alert-C5MKZVNe.js";import{C}from"./Card-Dj_6s2fm.js";import{C as K}from"./CardContent-E4pkaTWm.js";import{A}from"./Avatar-ydzpnxRU.js";import{C as S}from"./Chip-Bo09s3DG.js";import{T as U,a as X}from"./Tabs-7Hs5323V.js";import{T as J}from"./TextField-DfsSvHCZ.js";import{I as Q}from"./InputAdornment-CJPjAEY_.js";import{S as Z}from"./Search-_fv4dXx9.js";import{L as ee}from"./ListItemIcon-DOZ57llN.js";import{C as oe}from"./People-CzKSvRuL.js";import"./useSlot-cp-GZQY2.js";import"./useControlled-DMj5LCTg.js";const re=m(e.jsx("path",{d:"M20 7h-5V4c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2M9 12c.83 0 1.5.67 1.5 1.5S9.83 15 9 15s-1.5-.67-1.5-1.5S8.17 12 9 12m3 6H6v-.75c0-1 2-1.5 3-1.5s3 .5 3 1.5zm1-9h-2V4h2zm5 7.5h-4V15h4zm0-3h-4V12h4z"}),"Badge"),te=m(e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description"),ne=m(e.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),W=m(e.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}),"Folder"),se=m(e.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz"),ae=m(e.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),L={onboarding:["Test-3.pdf","Test-6.pdf"],client:["Test-1.pdf","Test-6.pdf"],training:["Test-4.pdf","Test-5.pdf"],forms:["Test-2.pdf","Test-6.pdf"]},R={onboarding:new Set,client:new Set,training:new Set,forms:new Set};async function ie(r,t){try{const n=await fetch(`/files/${r}/${t}`,{method:"HEAD",cache:"no-cache"});if(!n.ok)return null;const p=n.headers.get("content-length"),h=n.headers.get("last-modified"),a=b=>{if(!b)return"未知大小";const l=parseInt(b);return l<1024?`${l} B`:l<1024*1024?`${Math.round(l/1024)} KB`:`${(l/(1024*1024)).toFixed(1)} MB`},c=b=>b?new Date(b).toISOString().split("T")[0]:new Date().toISOString().split("T")[0];return{name:t,displayName:t.replace(".pdf",""),size:a(p),date:c(h),category:r,exists:!0,lastModified:h?new Date(h):new Date}}catch(n){return console.error(`获取文件详情失败: ${t}`,n),null}}function le(r){const t=L[r]||[],n=Array.from(R[r]||[]);return[...t,...n]}async function E(r){console.log(`🔍 正在扫描 ${r} 目录...`);const t=[],n=le(r);console.log(`📋 检测 ${n.length} 个可能的文件名: ${n.join(", ")}`);const p=n.map(async a=>await ie(r,a));return(await Promise.all(p)).forEach(a=>{var c;a&&(t.push(a),console.log(`✅ 发现文件: ${a.displayName} (${a.size})`),(c=L[r])!=null&&c.includes(a.name)||R[r].add(a.name))}),t.sort((a,c)=>a.name.localeCompare(c.name)),console.log(`📊 ${r} 目录扫描完成，找到 ${t.length} 个文件`),t}async function de(){const r=["onboarding","client","training","forms"],t={};console.log("🚀 开始扫描所有文件目录...");for(const p of r)t[p]=await E(p);const n=Object.values(t).reduce((p,h)=>p+h.length,0);return console.log(`🎉 扫描完成！总共找到 ${n} 个文件`),t}async function ce(r){return console.log(`🔄 刷新 ${r} 分类...`),await E(r)}const f=[{id:"onboarding",title:"Employment Forms",description:"Employee onboarding files and required forms",icon:e.jsx(ae,{sx:{fontSize:48}}),color:"#5B9BD5",count:2},{id:"client",title:"Client Documents",description:"Service-related agreements, consents, and policy documents",icon:e.jsx(oe,{sx:{fontSize:48}}),color:"#5B9BD5",count:1},{id:"training",title:"Training Documents",description:"Staff training guides, manuals, and instructional materials",icon:e.jsx(re,{sx:{fontSize:48}}),color:"#5B9BD5",count:2},{id:"forms",title:"Forms",description:"Daily use forms and record-keeping templates",icon:e.jsx(se,{sx:{fontSize:48}}),color:"#5B9BD5",count:1}];function ye(){var z,$;const[r,t]=g.useState(""),[n,p]=g.useState(""),[h,a]=g.useState({}),[c,b]=g.useState(!0),[l,y]=g.useState(!1),[D,j]=g.useState(null),k=async()=>{try{b(!0),j(null),console.log("🔄 Starting to load files....");const o=await de();a(o),f.forEach(s=>{var d;s.count=((d=o[s.id])==null?void 0:d.length)||0}),console.log("✅ Files loaded successfully:",o)}catch(o){console.error("❌ Failed to load files:",o),j("Failed to load files. Please try again.")}finally{b(!1)}},H=async o=>{try{y(!0),console.log(`🔄 Refreshing ${o} category...`);const s=await ce(o);a(w=>({...w,[o]:s}));const d=f.find(w=>w.id===o);d&&(d.count=s.length),console.log(`✅ ${o} refreshed successfully`)}catch(s){console.error(`❌ ${o} Failed to refresh category:`,s),j(`${o} Failed to refresh category`)}finally{y(!1)}};g.useEffect(()=>{k()},[]);const M=(o,s)=>{t(s)},v=((z=h[r])==null?void 0:z.filter(o=>o.name.toLowerCase().includes(n.toLowerCase())||o.displayName&&o.displayName.toLowerCase().includes(n.toLowerCase())))||[],P=o=>{try{const s=`/files/${o.category}/${o.name}`,d=document.createElement("a");d.href=s,d.download=o.name,d.target="_blank",document.body.appendChild(d),d.click(),document.body.removeChild(d),console.log("Starting file download:",o.displayName||o.name,"Path:",s)}catch(s){console.error("Download failed:",s),alert("Download failed. Please try again later.")}};return e.jsxs(N,{maxWidth:!1,sx:{maxWidth:"1400px",mx:"auto",px:3,py:4},children:[e.jsxs(x,{textAlign:"center",sx:{mb:6},children:[e.jsx(i,{variant:"h2",component:"h1",gutterBottom:!0,children:"Allcare Document Center"}),e.jsxs(i,{variant:"h6",color:"text.secondary",sx:{maxWidth:600,mx:"auto",mb:3},children:["Access essential care-related documents, including",e.jsx("br",{})," agreements, policies, training materials, ",e.jsx("br",{}),"and operational forms."]}),c&&e.jsxs(x,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx(B,{size:20,sx:{color:"#5B9BD5"}}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Loading..."})]}),D&&e.jsx(q,{severity:"error",sx:{mt:2,maxWidth:600,mx:"auto"},children:D})]}),e.jsx(F,{container:!0,spacing:4,sx:{mb:6},children:f.map(o=>e.jsx(F,{item:!0,xs:12,sm:6,md:3,children:e.jsx(C,{sx:{height:"100%",cursor:"pointer",transition:"all 0.3s ease-in-out",border:r===o.id?2:0,borderColor:r===o.id?o.color:"transparent",borderRadius:4,background:r===o.id?`linear-gradient(145deg, ${o.color}08, ${o.color}15)`:"linear-gradient(145deg, #ffffff, #f8f9fa)",boxShadow:r===o.id?"0 8px 32px rgba(91, 155, 213, 0.3), 0 4px 16px rgba(91, 155, 213, 0.2)":"0 4px 20px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, ${o.color}, ${o.color}80)`,opacity:r===o.id?1:0,transition:"opacity 0.3s ease"},"&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:"0 12px 40px rgba(91, 155, 213, 0.25), 0 6px 20px rgba(91, 155, 213, 0.15)","&::before":{opacity:1}}},onClick:()=>t(o.id),children:e.jsxs(K,{sx:{textAlign:"center",p:3},children:[e.jsx(A,{sx:{width:80,height:80,mx:"auto",mb:2,background:`linear-gradient(145deg, ${o.color}25, ${o.color}15)`,color:o.color,boxShadow:`
                      inset 0 2px 4px rgba(255, 255, 255, 0.8),
                      inset 0 -2px 4px rgba(0, 0, 0, 0.1),
                      0 4px 12px rgba(91, 155, 213, 0.2)
                    `,border:`2px solid ${o.color}30`,transition:"all 0.3s ease",position:"relative","&::before":{content:'""',position:"absolute",top:"10%",left:"10%",width:"30%",height:"30%",background:"rgba(255, 255, 255, 0.3)",borderRadius:"50%",filter:"blur(8px)"}},children:o.icon}),e.jsx(i,{variant:"h5",gutterBottom:!0,children:o.title}),e.jsx(i,{variant:"body2",color:"text.secondary",paragraph:!0,children:o.description}),e.jsx(S,{label:`${o.count} Files`,sx:{background:`linear-gradient(145deg, ${o.color}, ${o.color}cc)`,color:"white",fontWeight:600,boxShadow:`
                      0 2px 8px rgba(91, 155, 213, 0.3),
                      inset 0 1px 2px rgba(255, 255, 255, 0.2),
                      inset 0 -1px 2px rgba(0, 0, 0, 0.1)
                    `,border:`1px solid ${o.color}80`,transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)",boxShadow:`
                        0 4px 12px rgba(91, 155, 213, 0.4),
                        inset 0 1px 2px rgba(255, 255, 255, 0.3),
                        inset 0 -1px 2px rgba(0, 0, 0, 0.15)
                      `}}})]})})},o.id))}),e.jsxs(C,{sx:{p:4,borderRadius:4,background:"linear-gradient(145deg, #ffffff, #f8f9fa)",boxShadow:`
          0 8px 32px rgba(0, 0, 0, 0.08),
          0 4px 16px rgba(0, 0, 0, 0.04),
          inset 0 1px 2px rgba(255, 255, 255, 0.8)
        `,border:"1px solid rgba(91, 155, 213, 0.1)"},children:[e.jsxs(x,{sx:{mb:3},children:[e.jsxs(x,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsx(U,{value:r||!1,onChange:M,variant:"scrollable",scrollButtons:"auto",sx:{flex:1},children:f.map(o=>e.jsx(X,{label:o.title,value:o.id,icon:V.cloneElement(o.icon,{sx:{fontSize:24}}),iconPosition:"start"},o.id))}),!c&&e.jsx(u,{variant:"outlined",size:"small",startIcon:l?e.jsx(B,{size:16}):e.jsx(I,{}),onClick:k,disabled:l,sx:{borderColor:"#5B9BD5",color:"#5B9BD5",ml:2,minWidth:"auto","&:hover":{borderColor:"#5B9BD5",backgroundColor:"rgba(91, 155, 213, 0.1)"}},children:l?"Refreshing...":"Refresh List"})]}),e.jsx(J,{fullWidth:!0,placeholder:"Searching...",value:n,onChange:o=>p(o.target.value),InputProps:{startAdornment:e.jsx(Q,{position:"start",children:e.jsx(Z,{})})},sx:{mb:3}})]}),r?e.jsxs(e.Fragment,{children:[e.jsxs(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(i,{variant:"h5",children:($=f.find(o=>o.id===r))==null?void 0:$.title}),e.jsx(T,{onClick:()=>H(r),disabled:l,sx:{color:"#5B9BD5",border:"1px solid #5B9BD5",borderRadius:2,padding:1,"&:hover":{backgroundColor:"rgba(91, 155, 213, 0.1)",borderColor:"#5B9BD5"},"&:disabled":{color:"rgba(91, 155, 213, 0.5)",borderColor:"rgba(91, 155, 213, 0.3)"}},children:l?e.jsx(B,{size:20,sx:{color:"#5B9BD5"}}):e.jsx(I,{})})]}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Found ",v.length," files ",c&&"(Scanning...)"]}),e.jsx(O,{children:v.map((o,s)=>e.jsxs(_,{sx:{border:"1px solid rgba(91, 155, 213, 0.15)",borderRadius:3,mb:2,background:"linear-gradient(145deg, #ffffff, #f8f9fa)",boxShadow:`
                      0 2px 8px rgba(0, 0, 0, 0.06),
                      0 1px 4px rgba(0, 0, 0, 0.04),
                      inset 0 1px 1px rgba(255, 255, 255, 0.8)
                    `,transition:"all 0.3s ease",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:"4px",background:"linear-gradient(180deg, #5B9BD5, #5B9BD580)",opacity:0,transition:"opacity 0.3s ease"},"&:hover":{backgroundColor:"rgba(91, 155, 213, 0.05)",transform:"translateX(4px)",boxShadow:`
                        0 4px 16px rgba(91, 155, 213, 0.15),
                        0 2px 8px rgba(91, 155, 213, 0.1),
                        inset 0 1px 2px rgba(255, 255, 255, 0.9)
                      `,"&::before":{opacity:1}}},children:[e.jsx(ee,{children:e.jsx(A,{sx:{background:"linear-gradient(145deg, #5B9BD525, #5B9BD515)",color:"#5B9BD5",boxShadow:`
                        inset 0 1px 2px rgba(255, 255, 255, 0.8),
                        inset 0 -1px 2px rgba(0, 0, 0, 0.1),
                        0 2px 6px rgba(91, 155, 213, 0.2)
                      `,border:"1px solid rgba(91, 155, 213, 0.3)",transition:"all 0.3s ease","&:hover":{transform:"scale(1.1)",boxShadow:`
                          inset 0 1px 3px rgba(255, 255, 255, 0.9),
                          inset 0 -1px 3px rgba(0, 0, 0, 0.15),
                          0 4px 12px rgba(91, 155, 213, 0.3)
                        `}},children:e.jsx(te,{})})}),e.jsx(Y,{primary:o.displayName||o.name,secondary:`Name: ${o.name} | Size: ${o.size} | Updated: ${o.date}`,primaryTypographyProps:{fontWeight:500}}),e.jsx(G,{children:e.jsx(T,{edge:"end",onClick:()=>P(o),sx:{background:"linear-gradient(145deg, #5B9BD5, #5B9BD5cc)",color:"white",boxShadow:`
                          0 3px 12px rgba(91, 155, 213, 0.4),
                          inset 0 1px 2px rgba(255, 255, 255, 0.3),
                          inset 0 -1px 2px rgba(0, 0, 0, 0.1)
                        `,border:"1px solid rgba(91, 155, 213, 0.8)",transition:"all 0.3s ease","&:hover":{background:"linear-gradient(145deg, #5B9BD5dd, #5B9BD5aa)",transform:"scale(1.1) translateY(-1px)",boxShadow:`
                            0 6px 20px rgba(91, 155, 213, 0.5),
                            inset 0 1px 3px rgba(255, 255, 255, 0.4),
                            inset 0 -1px 3px rgba(0, 0, 0, 0.15)
                          `},"&:active":{transform:"scale(0.95)",boxShadow:`
                            0 2px 8px rgba(91, 155, 213, 0.3),
                            inset 0 2px 4px rgba(0, 0, 0, 0.2)
                          `}},children:e.jsx(ne,{})})})]},s))}),v.length===0&&e.jsxs(x,{textAlign:"center",sx:{py:4},children:[e.jsx(W,{sx:{fontSize:64,color:"grey.400",mb:2}}),e.jsx(i,{variant:"h6",color:"text.secondary",children:"No matching documents found"}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Please try a different keyword or select another document category."})]})]}):e.jsxs(x,{textAlign:"center",sx:{py:8},children:[e.jsx(W,{sx:{fontSize:80,color:"#5B9BD5",mb:3}}),e.jsx(i,{variant:"h5",gutterBottom:!0,sx:{color:"#2c3e50",fontWeight:600},children:"Please Select a Document Category"}),e.jsx(i,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Click on a category card or tab above to browse the corresponding documents."}),e.jsx(x,{sx:{display:"flex",gap:2,justifyContent:"center",flexWrap:"wrap"},children:f.map(o=>e.jsx(u,{variant:"outlined",onClick:()=>t(o.id),sx:{borderColor:o.color,color:o.color,"&:hover":{borderColor:o.color,backgroundColor:`${o.color}10`}},children:o.title},o.id))})]})]}),e.jsx(C,{sx:{mt:6,p:4,textAlign:"center",background:"linear-gradient(135deg, #5B9BD5 0%, #5B9BD5 100%)",color:"white",borderRadius:4,position:"relative",overflow:"hidden",boxShadow:"0 8px 32px rgba(91, 155, 213, 0.3)","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)",pointerEvents:"none"}},children:e.jsxs(x,{sx:{position:"relative",zIndex:1},children:[e.jsx(i,{variant:"h4",gutterBottom:!0,sx:{fontWeight:700},children:"Need Help Finding a Document?"}),e.jsxs(i,{variant:"h6",sx:{mb:4,opacity:.9,fontWeight:400},children:["If you’re unable to find the document you need or require assistance ",e.jsx("br",{}),"with other files, lease contact Allcare Health Care."]}),e.jsxs(x,{sx:{display:"flex",gap:3,justifyContent:"center",flexWrap:"wrap",mb:4},children:[e.jsx(u,{variant:"contained",size:"large",sx:{backgroundColor:"white",color:"#5B9BD5",px:4,py:1.5,borderRadius:3,fontWeight:600,textTransform:"none",boxShadow:"0 4px 20px rgba(255, 255, 255, 0.3)","&:hover":{}},children:"Contact Us"}),e.jsx(u,{variant:"outlined",size:"large",sx:{borderColor:"rgba(255, 255, 255, 0.8)",color:"white",px:4,py:1.5,borderRadius:3,fontWeight:600,textTransform:"none",borderWidth:2,"&:hover":{}},children:"View Customer Manual"})]}),e.jsxs(x,{sx:{display:"flex",gap:3,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(S,{label:"Phone: (240) 668-4666",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontSize:"0.9rem",fontWeight:500,px:2,py:1,borderRadius:3,border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)"}}),e.jsx(S,{label:"Email: allcaremd@outlook.com",sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontSize:"0.9rem",fontWeight:500,px:2,py:1,borderRadius:3,border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(10px)"}})]})]})})]})}export{ye as default};
